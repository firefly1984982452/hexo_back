---
title: 我常用的前端短代码记录
date: 2018-02-28 14:19:32
tags:
categories: 编程开发
---

# 检查边距
```
*{ background: #000 !important;
color: #0f0 !important;
outline: solid #f00 1px !important; }
```
![a7b789a9gy1fow4hu8khhj206203qwea.jpg](http://upload-images.jianshu.io/upload_images/830956-0d805390980baaaf.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

# 保留小数点后两位
```
parseFloat((a).toFixed(2));//toFixed只能针对数字类型才能使用
```

# Vue过滤器
```
filters: {
   returnBill: function(value) {
      var bills = ["否", "是"];
      return bills[value];
   }
}
```

# 高和宽
```
function getInfo() 
{ 
var s = ""; 
s += " 网页可见区域宽："+ document.body.clientWidth; 
s += " 网页可见区域高："+ document.body.clientHeight; 
s += " 网页可见区域宽："+ document.body.offsetWidth + " (包括边线和滚动条的宽)"; 
s += " 网页可见区域高："+ document.body.offsetHeight + " (包括边线的宽)"; 
s += " 网页正文全文宽："+ document.body.scrollWidth; 
s += " 网页正文全文高："+ document.body.scrollHeight; 
s += " 网页被卷去的高(ff)："+ document.body.scrollTop; 
s += " 网页被卷去的高(ie)："+ document.documentElement.scrollTop; 
s += " 网页被卷去的左："+ document.body.scrollLeft; 
s += " 网页正文部分上："+ window.screenTop; 
s += " 网页正文部分左："+ window.screenLeft; 
s += " 屏幕分辨率的高："+ window.screen.height; 
s += " 屏幕分辨率的宽："+ window.screen.width; 
s += " 屏幕可用工作区高度："+ window.screen.availHeight; 
s += " 屏幕可用工作区宽度："+ window.screen.availWidth; 
s += " 你的屏幕设置是 "+ window.screen.colorDepth +" 位彩色"; 
s += " 你的屏幕设置 "+ window.screen.deviceXDPI +" 像素/英寸"; 
console.log(s); 
} 
getInfo(); 
直接获取标签高或宽
.offsetHeight
```

# 新建一个react项目
```
1.安装
npm install -g create-react-app

2.创建
create-react-app my-app

3.安装UI
npm install material-ui

4.安装点击插件
npm install  react-tap-event-plugin

5.安装fetch插件
npm install whatwg-fetch

6.安装react-router
npm install --save-dev react-router
npm install --S react-router-dom

打包
npm run-script build
```

# 限定N行
```
display: -webkit-box;
overflow: hidden;
white-space: normal!important;
text-overflow: ellipsis;
word-wrap: break-word;
-webkit-line-clamp: 1;
-webkit-box-orient: vertical;

单行
.table tbody > tr > td.name{
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
 }
```

# fetch使用（POST）
```
fetch("http://119.23.225.18/getmsg", {
   method: "POST",
   headers: {
       "Content-Type": "application/x-www-form-urlencoded",
   },
   mode: "cors",
   body: JSON.stringify({
       page : 1,
       rows : 10
   })
}).then(function(res) {
   if (res.status === 200) {
         return res.json()
   } else {
         return Promise.reject(res.json())
   }
}).then(function(data) {
    console.log(data);
    self.appentDomlist(data.data);
}).catch(function(err) {
    console.log(err);
});
```

# 新版本上线（指导蒙版）
```
position: absolute;
box-shadow: rgba(0, 0, 0, 0.75) 10px 1px 1px 99px;
z-index: 100;
width: 367px;
height: 143px;
left: 40px;
top: 12px;
```
![Image.png](http://upload-images.jianshu.io/upload_images/830956-0b67fbeae1afbb71.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


# 把时间戳转为时间
```
var time = new Date(Number(value)*1000);
var Y = time.getFullYear();
var m = time.getMonth() + 1;
var d = time.getDate();
var H = time.getHours();
var mi = time.getMinutes();
var s = time.getSeconds();
if(m < 10) {
    m = '0' + m;
}
if(d < 10) {
   d = '0' + d;
}
 if(H < 10) {
   H = "0" + H;
}
if(mi < 10) {
   mi = '0' + mi;
}
if(s < 10) {
   s = "0" + s;
}
 return (Y + "-" + m + "-" + d + " " + H + ":" + mi + ":" + s);
```

# 获取当前时间戳
```
var timestamp=new Date().getTime()；
				Math.round(new Date().getTime()/1000)
```

# 两个时间戳相减所距时间
```
var now = Math.round(new Date().getTime()/1000);
var nTime = now-value;
var day = Math.floor(nTime/1000/60/60/24);
var hour = Math.floor(nTime%1000/60/60);
var minute = Math.floor(nTime/1000/60);
var sec = Math.floor(nTime/1000);
console.log(day+"==="+hour+"==="+minute+"==="+sec);
if (day) {
  return day+"天";
} else if (hour) {
  return hour+'小时';
}else if(minute){
  return minute+'分';
}else{
  return sec+'秒';
}
```

# 网络请求发送参数格式转换
```
const formartJson2prams = (obj)=>{
    var result = [];
    for(const item in obj){
        result.push(item+"="+obj[item])
    }
    return result.join("&");
}
```

# 引用模块的两种不同写法
```
//ES6 模块

import MyModule from './MyModule.js';


//CommonJS

var MyModule = require('./MyModule.js');
```

# babel的坑
```
新版babel要安装两个，然后还有一大坨附属的，还要在webpack.config.js里面更改
     test: /\.jsx?$/,
    loader: 'babel-loader',
    exclude: /node_modules/,
    query: {
        presets: ['es2015']
    }
```

# 判断对象{}是否为空
```
if(Object.keys(obj).length === 0){...}
```

# CSS做三角形
```
width: 0;
height: 0;
border-color: #f60 transparent transparent transparent;
border-style: solid;
border-width: 10px;
```

# width 100% 自适应
```
width: -webkit-fill-available;
```


# 雪碧图
```
background: url(xxx) no-repeat;
width: 64px;
height: 64px;
background-position: 0 -64px;
```

# html自适应手机
```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
```

# 最后一个li不显示border（类推）
```
方法一：
li{border-top:1px solid #000;}
li:first-child{border-top:none;}

方法二：
li+li{
    border-top: 1px dashed #999;
}

方法三：
li:not(:last-child)...
```

# 21.禁用左键
```
$(document).ready(function(){
  $(document).bind('contextmenu', function(e){
    return false;
  })
})
```

# 22.文字换行
```
word-wrap:break-word;
```

# 23.forEach跳出循环
```
var BreakException= {};

try {
    [1,2,3].forEach(function(i) {
        if(i === 2) throw BreakException;
        console.log(i);
    });
} catch(e) {
    if (e!==BreakException) throw e;
}

//forEach是函数，不是语法，因此没有直接break的语法。如果要中止，可使用 Array.every 或 Array.some。
```


# 24.[jquery input change事件](http://blog.csdn.net/arkblue/article/details/18039091)
```
$("#input_id").on('input',function(e){
   alert('Changed!')
});
```

# 25.随机整数
```
Math.floor(Math.random()*page.otherParams.userIds.length)
```

# 26.改变控制台面样式
```
console.log("%c来自:console","color:red;font-size:50px");
```
![Image.png](http://upload-images.jianshu.io/upload_images/830956-e1c448a77adde0cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


# 27.电话正则
```
if(!(/^1[34578]\d{9}$/.test(responsibleTel.val()))){
   return toastr.info("请输入正确的电话号码","提示！");
}
```


# 28.在vue中给style添加scoped来使得当前样式只作用于当前组件的节点
```
<style scoped>
</style>
```


# 29.CSS Resets
```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
  outline: none;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
html { height: 101%; }
body { font-size: 62.5%; line-height: 1; font-family: Arial, Tahoma, sans-serif; }

article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section { display: block; }
ol, ul { list-style: none; }

blockquote, q { quotes: none; }
blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; }
strong { font-weight: bold; } 

table { border-collapse: collapse; border-spacing: 0; }
img { border: 0; max-width: 100%; }

p { font-size: 1.2em; line-height: 1.0em; color: #333; }
```


# 30.最简单的闭包
```
;(function(){  
  alert(1);  
})();
```


# 31.vue循环时怎么绑定图片地址及href跳转地址
```
<li v-for="v in sites">
	<a :href="v.herf">
		<img v-bind:src="v.url"/>
		<span>{{ v.text }}</span>
	</a>
</li>
```


# 32.当时时间时分秒（非时间戳）

`new Date().toLocaleString()`


# 33.页面的简单JS小框架

```
<script>
var app = {
  datas : {
    arr : []
  },
  methods : {
    show : function () {
      // body...
    },
    close : function (argument) {
      // body...
    }
  },
  init : function(){
    app.methods.close();
  }
}
var vm = new Vue(){
  el : '#app',
  data : app.datas,
  methods : app.methods,
  filters ： {
    text : function (flag) {
      // body...
    }
  }
}

window.addEventListener("sign",function(){
  app.methods.show();
})

;(function(){
  app.init();
})();
</script>
```


# 34 自动化测试

`loadrunner`和`jmeter`


# 35 flex小记


## 规范

```
<div class="box">
  <div class="item"></div>
</div>
```

## 示例

```
.box{
  width: 400px;
  height: 400px;
  border: 1px solid #f7b2bb;
  display: flex;
  /*flex-direction: row;//方向
  flex-wrap: wrap; //换行 */
  flex-flow: row wrap;
  justify-content: space-between;//内容
  align-content: space-between;//
}
.item{
  width: 100px;
  height: 100px;
  background: #f7b2bb;
  color: #fff;
  border: 1px solid #eee;
  display: flex;
  justify-content: space-around;
  align-items: center;
  /*flex-grow: 3;*/
}
```


# 35 冒泡事件

`event.stopProgation`能阻止冒泡事件


# 36 默认事件

`event.preventDefault`能阻止如`<a>`的默认`href`事件


# 37 map键值对形式怎样解析

```
let listKey = Object.keys(list);
for(var i in listKey){
  console.log(list[listKey[i]])
}
```


# 38 css禁止鼠标点击

`pointer-events:none;`


# 39 uncode字符转换

```
unescape(html) {
    return String(html)
    .replace(/&amp;/g, '&')
    .replace(/&quot;/g, '"')
    .replace(/&#39;/g, '\'')
    .replace(/&lt;/g, '<')
    .replace(/&gt;/g, '>');
}
```

# 40 保留两位小数（非四舍五入）

```
var b = parseFloat(price).toFixed(3);
this.all_price = b.substring(0,b.toString().length - 1);
```


# 41 添加标签栏logo

```
<link rel="shortcut icon" type="image/x-icon" href="./static/logo.ico" rel="shortcut icon" />
```

*tips:vue-cli项目中，要把.ico文件放在static文件中，并重新编译运行*


# 42 Map

```
var m = new Map();
m.set('name',{a:'alice',b:'bob'});
```

# 43 CSS让段落开头自动空两格代码

`text-indent:2em;`



# 44 文字效果

```
text-decoration:none 无装饰，通常对html下划线标签去掉下划线样式
text-decoration:underline 下划线样式
text-decoration:line-through 删除线样式-贯穿线样式
text-decoration:overline 上划线样式
```


# 45 禁止缓存

```

<!--禁止缓存-->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<!--禁止缓存 end-->

```

# 46 $(".a").eq(0) 和 $(”.a“)[0]

```
<a class="a"></a>
<a class="a"></a>
<a class="a"></a>

$('.a')  // 选择了3个a，都是jq对象（可以用jq的属性、方法）

$('.a').eq(1) // 选择了第二个a，是jq对象（不可以使用dom属性方法，可以用jq的属性、方法）

$('.a')[1]  // 选择了第二个a，是dom对象（可以使用dom属性，方法，不可以使用jq属性方法）

$('.a').eq(1)[0]  // 选择了第二个a，并且转化成都是dom对象（可以使用dom属性，方法，不可以使用jq属性方法）

$('.a')[0].eq(1) // 错误，因为dom对象用不了jq方法，eq（）是jq方法。
```


# 47 css导航横向滑动

## html

```
<div class="nav-wrap">
  <div class="nav">
    <div class="li" v-for="(name,index) in datas.name">
      <span>{{name}}</span>
    </div>
  </div>
</div>
```

## css

```
.nav-wrap {
  height: 0.9rem;
  overflow-x: scroll;
  -webkit-overflow-scrolling: touch;
  background: #fff;
  .nav {
    white-space: nowrap;
    .li {
      display: inline-block;
     }
   }
}
```

# 48 hybird

```
$(".company_color").click(function(){
  var u = navigator.userAgent;
  var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; //android终端或者uc浏览器
  var isIos = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
  var company_name = $(this).text();
  if(isAndroid) {
    var msg = window.mrlou.androidIs("2",company_name);
  } else if(isIos) {
    //iosPhone()这个方法，ios会自动监听，并接收我传过来的值，用msg接收它传给我的值
    broker("2",company_name);
  }
})
```

# 49 代码滑到顶部

```
$('body,html').animate({scrollTop:'0px'},300);
```

# 50 全屏

```
document.querySelector('.div').style.height = window.outerHeight+'px';
```

# 51 打开下载后立马关闭

```
var adom = document.createElement("a");
adom.setAttribute("href",url);
adom.width = "0px";
adom.height = "0px";
adom.setAttribute("target","_blank")
document.body.appendChild(adom)
adom.click();
adom.remove();
```

# 51 获取指定时间的时间戳

`Math.floor(new Date(Date.UTC(2019, 0, 1, 0, 0, 0)).getTime() / 1000)`


# 数据类型

以前判断`if(res.data.status)`，可以视情况写为`if(typeof res === 'undefined')`。

## 字符串和数组

字符串无法直接改变长度

字符串
```
var str = '123456';
str.length; //6
str.length = 3;
str;//'123456'
```

数组
```
var arr = [1,2,3,4,5,6];
arr.length;//6
arr.length = 3;
arr;//[1,2,3]
```

## base64转码

```
var string = 'Hello World!';
btoa(string) // "SGVsbG8gV29ybGQh"
atob('SGVsbG8gV29ybGQh') // "Hello World!"
```

中文

```
function b64Encode(str) {
  return btoa(encodeURIComponent(str));
}

function b64Decode(str) {
  return decodeURIComponent(atob(str));
}

b64Encode('你好') // "JUU0JUJEJUEwJUU1JUE1JUJE"
b64Decode('JUU0JUJEJUEwJUU1JUE1JUJE') // "你好"

```

## boolean转换

```
str = str == 1?true:false;

```

变为：

```
str = Boolean(str);
```

# toString 和 parseInt的其它用法

可以转换进制

比如，`toString()`里面传数值的话，就会转换成对应的进制

```
var number = 3344
number.toString();      //'3344'
number.toString(16);    //'d10'
```

同样，用`parseInt`可以将其它进制的转换成10进制的正常数值

```
parseInt('d10',16)
```

# toLocalString

```
var num = 1234567890;
num.toLocalString();    //'1,234,567,890'
```


# 单行写一个评级组件

"★★★★★☆☆☆☆☆".slice(5 - rate, 10 - rate);定义一个变量rate是1到5的值

# `$$("*")`的使用

`$$("*")`相当于选择所有的标签，但是只有控制台有用。


# 合并两个数组

```
var x = {a:1};
var y = {b:2};
var z = Object.assign(x,y)
	z // {a: 1, b: 2}
```

# set去重

`[...new Set([1,2,'1',2,3,1])]`

结果：`(4) [1, 2, "1", 3]`

# 用最短的代码实现一个长度为m(6)且值都n(8)的数组

`Array(6).fill('8')`

# 取一个数组中的最大值 和最小值 

```
var numbers = [1232,5324,234,234,123,-234,234,54,12];
Math.max.apply(Math,numbers);//最大值 
Math.min.apply(Math,numbers);//最小值 
```

**[参考：](https://github.com/jawil/blog/issues/24)**

# 简单的公告轮播效果


```
data(){
	animate:false,
	items:['aaa','bbb','ccc']
},
methods:{
	scroll(){
		this.animate = true;
		setTimeout(function(){
			this.items.push(this.items[0]);
			this.shift();
			this.animate = false;
		},3000)
	}
}
```

# scroll滚动事件在浏览器无效


在代码中写下了`document.body.scrollTop = 0;`，打印出来的值也是0，但是奈何chrome浏览器就是没有效果， 没有滚动到最上面去。

然后试了一下`$('html,body').animate({scrollTop:'0px'},500);`，发现竟然成功了，原来是兼容性的问题。jQuery已经做了兼容了。



# css导航横向滑动

## html

```
<div class="nav-wrap">
	<div class="nav">
		<div class="li" v-for="(name,index) in datas.name">
			<span>{{name}}</span>
		</div>
	</div>
</div>
```

## css

```
.nav-wrap {
  height: 0.9rem;
  overflow-x: scroll;
  -webkit-overflow-scrolling: touch;
  background: #fff;
  .nav {
    white-space: nowrap;
    .li {
      display: inline-block;
     }
   }
}
```

# js打印相关


## 打印方法

`window.print();`

## 局部打印

### media属性

```
<style type="text/css" media=print>
	.noprint {
		display: none
	}
</style>
```

- 在正常的html文件中有效，但我试了在vue中无效

### 媒体查询
```

<style type="text/css">
	@media print {
		.no{
			display: none;
		}
	}
</style>
```

- 亲测有效

# 金钱格式化

`(23333333).toLocaleString('en-US')`

# 取出数组中最大的数值

`Math.max(...[14, 3, 77])`

# 位运算

```
1>>3
相当于
1 = 0000 0001
移3位 = 0000 1000 = 8

故值为8
```

# 次方

`Math.pow(2, 3)`代表 2的3 次方

# 取随机字符串

先转为16进制，再去掉前两位小数点

`Math.random().toString(16).subString(2)`